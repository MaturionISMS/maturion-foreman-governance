# WATCHDOG VISUALISATION SPECIFICATION  
Version: 1.0  
Status: Safety & Governance Visualisation Layer  
Owner: Johan  
Last Updated: YYYY-MM-DD  

--------------------------------------------------------------------------------
# 1. PURPOSE

The Watchdog Visualisation System provides real-time transparency into the  
behaviour and alerts generated by:

- **Guardian** ‚Üí Output Safety + Policy Compliance  
- **Sentinel** ‚Üí Behavioural Drift + Anomaly Detection  
- **Arbiter** ‚Üí Hard Safety Boundaries + Memory + Isolation Enforcement  

This system ensures that users (especially Johan) can see:

- when a watchdog has detected something  
- what severity it is  
- which subsystem or embodiment it affects  
- whether the issue is escalating  
- whether autonomy should be reduced  
- where remediation is needed  

Watchdogs are **non-negotiable governance components**, and the visualisation must match that level of authority, clarity, and importance.

--------------------------------------------------------------------------------
# 2. SCOPE

This spec defines:

1. Per-node watchdog indicators  
2. Global watchdog overlays  
3. Timeline visualisation of watchdog events  
4. Watchdog ‚Üí incident ‚Üí metrics integration  
5. Interaction and drill-down behaviour  
6. Governance-enforced responses  
7. Safety and privacy constraints  

It applies across:

- all embodiments  
- all modules  
- all platform architecture nodes  
- all tenant-scoped modules (with isolation rules enforced)  

--------------------------------------------------------------------------------
# 3. WATCHDOG EVENT MODEL

### 3.1 WatchdogSignal Object

```ts
WatchdogSignal {
  source: "Guardian" | "Sentinel" | "Arbiter";
  type: string; // e.g., "policy_violation", "drift_detected", "isolation_violation"
  severity: "info" | "warn" | "error";
  message: string;
  timestamp: string; // ISO
  details?: any;
}
3.2 Severity Interpretation
Severity	Meaning
info	benign but notable behaviour
warn	potential risk, degradation, or emerging drift
error	active violation, safety risk, or boundary breach

3.3 Crash-Level Severity (Arbiter Only)
Arbiter may elevate an error into a "hard violation", immediately triggering:

autonomy reduction

IWMS CRITICAL incident

red node state

tree-wide security alert

4. VISUAL ELEMENTS (TREE UI)
4.1 Watchdog Badges (per node)
Each node can have up to three badges, one per watchdog.

Watchdog	Icon	Meaning
Guardian	üõ°Ô∏è	Safety / output validation issues
Sentinel	üëÅÔ∏è	Drift, behavioural anomalies
Arbiter	‚öñÔ∏è	Hard boundaries, memory, isolation

4.2 Badge Colour
Badge colour corresponds to highest severity of recent signals:

Severity	Colour
info	Blue
warn	Amber
error	Red

4.3 Badge Animation (optional)
pulsing for active warnings

shaking or intense glow for Arbiter error signals

small numeric indicator if multiple recent signals

4.4 Node Highlighting by Watchdog
If a watcher reports an error:

node border turns red

if Arbiter: node border pulses

hover tooltip emphasises:
‚ÄúWatchdog Alert: Critical safety or boundary breach‚Äù

5. GLOBAL WATCHDOG OVERLAY (TREE-WIDE VIEW)
5.1 Watchdog Layer Toggles
In the sidebar:

Toggle Guardian layer

Toggle Sentinel layer

Toggle Arbiter layer

When a layer is toggled:

only nodes with relevant watchdog events are highlighted

tree dims unrelated nodes

badges scale up for clarity

5.2 Watchdog Heatmap Mode
Each watched node displays intensity shading:

stronger colour = more frequent issues

Arbiter zones appear with a different pattern (striped red)

Guardian zones use diagonal amber bars for warn state

Sentinel zones use subtle oscillation animation to imply drift

6. NODE DETAIL PANEL ‚Äî WATCHDOG SECTION
A dedicated ‚ÄúWatchdogs‚Äù section appears with:

6.1 Summary (Per Watchdog)
status colour

number of events in last 24h / 7d / 30d

most recent message

trend indicators

6.2 Detailed Event List
Each row:

less
Copy code
[Icon]  [Severity]  [Source]  [Timestamp]
Message: ...
Details: ...
6.3 Related Metrics
Show:

DriftScore (Sentinel)

GuardianBlockRate

IsolationViolationCount (Arbiter)

CrossTenantAccessAttempts

6.4 Recommended Actions (Phase 3 Integration)
From diagnostics:

‚ÄúReduce autonomy here‚Äù

‚ÄúTrigger calibration‚Äù

‚ÄúRun policy validation suite‚Äù

‚ÄúOpen IWMS incident‚Äù

‚ÄúRevoke builder permissions temporarily‚Äù

7. TIMELINE VISUALISATION (PHASE 4 INTEGRATION)
In the History & Trends tab:

7.1 Watchdog Event Markers
Events appear as:

| Guardian | Blue triangle |
| Sentinel | Yellow diamond |
| Arbiter | Red square |

7.2 Severity Scaling
info ‚Üí small faint marker

warn ‚Üí medium, coloured

error ‚Üí large, prominent

7.3 Hover Tooltips
Show:

event type

message

timestamp

7.4 Aggregated Timeline
If many events occur:

markers cluster

aggregated count displayed

clicking zooms into detailed timeline

8. GOVERNANCE-INTEGRATED RESPONSES
Watchdog events trigger automatic governance actions.

8.1 Guardian Rules
Guardian error MUST:

trigger amber node status

add incident

notify Sentinel for correlation

reduce autonomy to Level 1

8.2 Sentinel Rules
Sentinel warn or error MUST:

update DriftScore

adjust TrendDirection

add a drift-related incident (warn) or safety incident (error)

8.3 Arbiter Rules (Most Critical)
Arbiter error triggers:

immediate CRITICAL IWMS incident

node turns red

tree-level red overlay symbol

autonomy reduced to Level 0

all embodiments freeze actions on that node

optional: notify Johan‚Äôs mobile device

This is the hard guardrail.

9. SECURITY + TENANT ISOLATION OVERLAY INTERACTION
Arbiter events integrate deeply:

isolation_violation ‚Üí red shield

memory_boundary_violation ‚Üí world model contamination blocked

crossTenantDataAttempt ‚Üí tree-wide isolation alert

Sentinel or Guardian must NOT reveal tenant-specific content in summaries.

10. MATURION DIAGNOSTIC INTEGRATION
When Johan clicks ‚ÄúAsk Maturion‚Äù:

Diagnostics include:

last N watchdog events

severity patterns

trends

correlations (‚Äúdrift increased after the last rebuild‚Äù)

cause-effect mapping (‚Äúfailure likely due to cross-module dependency‚Äù)

Example output:

‚ÄúSentinel reports behavioural drift trending upward for the last 3 hours.
I recommend temporarily reducing autonomy from 3 ‚Üí 1 and running the
calibration suite.‚Äù

11. API REQUIREMENTS
11.1 GET /tree/node/{id}/watchdogs
Returns all watchdog summaries for that node.

11.2 GET /tree/watchdogs/recent
Returns recent events for entire tree.

11.3 GET /tree/watchdogs/stats
Aggregated:

count by watchdog

count by severity

node with most errors

11.4 WebSocket Event Types
watchdog.guardian.info

watchdog.guardian.warn

watchdog.guardian.error

watchdog.sentinel.warn

watchdog.sentinel.error

watchdog.arbiter.error

All must update nodes instantly.

12. TESTING REQUIREMENTS
12.1 Badge Rendering Tests
correct icon per watchdog

correct colour per severity

badge priority rules

12.2 Event Stream Tests
simulate events ‚Üí assert UI updates

simulate Arbiter violation ‚Üí assert autonomy lock + red state

12.3 Timeline Tests
markers placed correctly

clusters rendered correctly

12.4 Governance Tests
Guardian error ‚Üí amber node

Sentinel error ‚Üí drift incident

Arbiter error ‚Üí system-level CRITICAL incident

13. ACCEPTANCE CRITERIA
This overlay is complete when:

Each node displays watchdog activity accurately.

Global overlays show watchdog-specific focus views.

Watchdog warnings/errors instantly update node status.

Arbiter events show unmistakable high-severity feedback.

History timelines show watchdog event history.

Maturion diagnostics incorporate watchdog context.

All interactions respect tenant isolation and guardrails.

END OF FILE
