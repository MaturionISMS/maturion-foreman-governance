# WARNING_VERIFICATION_REPORT Schema

## Status
**Type**: Canonical Schema Definition  
**Authority**: Binding on ALL agents  
**Version**: 1.0.0  
**Date**: 2026-01-07  
**Integration**: WARNING_DISCOVERY_BLOCKER_PROTOCOL.md, QA_POLICY_MASTER.md Section 3.3

---

## Purpose

Defines the required structure and content for Warning Verification Reports generated by the discovering agent after verifying that warnings have been remediated by the original agent.

---

## Required Fields

### 1. Verification Metadata

```json
{
  "verificationMetadata": {
    "verifyingAgentId": "string (required) - ID of agent performing verification (discovering agent)",
    "verificationTimestamp": "ISO 8601 datetime (required) - When verification completed",
    "warningDiscoveryReportReference": "string (required) - Path to original WARNING_DISCOVERY_REPORT",
    "warningRemediationReportReference": "string (required) - Path to WARNING_REMEDIATION_REPORT",
    "remediatingAgentId": "string (required) - Agent that performed remediation",
    "repository": "string (required) - Repository where verification performed"
  }
}
```

---

### 2. Verification Results

```json
{
  "verificationResults": {
    "allWarningsResolved": "boolean (required) - Are ALL warnings from discovery report resolved?",
    "verificationMethod": "enum (required) - LOCAL_BUILD | CI_RUN | BOTH",
    "verificationDetails": [
      {
        "sourceFile": "string (required) - File that had warning",
        "warningMessage": "string (required) - Original warning message",
        "isResolved": "boolean (required) - Is this specific warning resolved?",
        "verificationNotes": "string (optional) - Notes on verification"
      }
    ],
    "totalWarningsVerified": "number (required) - Count of warnings checked",
    "totalWarningsResolved": "number (required) - Count of warnings resolved",
    "totalWarningsRemaining": "number (required) - Count of warnings still present"
  }
}
```

**Verification Method**:
- `LOCAL_BUILD`: Verified by running local build/lint/tests
- `CI_RUN`: Verified by reviewing CI run results
- `BOTH`: Verified by both local and CI

---

### 3. Verification Evidence

```json
{
  "verificationEvidence": {
    "codePullTimestamp": "ISO 8601 datetime (required) - When latest code was pulled",
    "gitCommitVerified": "string (required) - Latest commit SHA verified",
    "localBuildOutput": "string (optional) - Output from local build showing zero warnings",
    "localLintOutput": "string (optional) - Output from local lint showing zero warnings",
    "ciRunReference": "string (optional) - CI run URL showing zero warnings",
    "ciRunTimestamp": "ISO 8601 datetime (optional) - When CI run completed",
    "screenshots": [
      {
        "screenshotPath": "string (optional) - Path to screenshot",
        "screenshotDescription": "string (optional) - What screenshot shows"
      }
    ]
  }
}
```

---

### 4. Verification Outcome

```json
{
  "verificationOutcome": {
    "outcome": "enum (required) - PASS | FAIL | PARTIAL",
    "outcomeReason": "string (required) - Detailed explanation of outcome",
    "discoveringAgentCanResume": "boolean (required) - Can discovering agent resume work?",
    "remediatingAgentCanResume": "boolean (required) - Can remediating agent resume work?",
    "additionalRemediationRequired": "boolean (required) - Is more remediation needed?",
    "additionalRemediationDetails": "string (conditional) - If additionalRemediationRequired=true, what needs fixing"
  }
}
```

**Outcome Values**:
- `PASS`: All warnings resolved, agents may resume work
- `FAIL`: Warnings still present, remediation insufficient
- `PARTIAL`: Some warnings resolved, some remain

**Outcome Logic**:
- `PASS`: `allWarningsResolved=true`, `totalWarningsRemaining=0`
- `FAIL`: `allWarningsResolved=false`, `totalWarningsRemaining>0`
- `PARTIAL`: Some resolved, some remain (should not occur if remediation complete)

---

### 5. Sign-Off

```json
{
  "signOff": {
    "verifyingAgentSignature": "string (required) - Discovering agent ID confirming verification",
    "signOffTimestamp": "ISO 8601 datetime (required) - When sign-off provided",
    "signOffStatement": "string (required) - Explicit statement (e.g., 'I verify all warnings are resolved and authorize agents to resume work')",
    "authorizationToResume": "boolean (required) - Explicit authorization for agents to resume work"
  }
}
```

---

## Complete Schema Example (PASS)

```json
{
  "schemaVersion": "1.0.0",
  "reportType": "WARNING_VERIFICATION_REPORT",
  "verificationMetadata": {
    "verifyingAgentId": "ui-builder-01",
    "verificationTimestamp": "2026-01-07T16:30:00Z",
    "warningDiscoveryReportReference": "/governance/evidence/warnings/discovery/WARNING_DISCOVERY_REPORT_2026-01-07T14-35-00Z_ui-builder-01.json",
    "warningRemediationReportReference": "/governance/evidence/warnings/remediation/WARNING_REMEDIATION_REPORT_2026-01-07T16-00-00Z_api-builder-01.json",
    "remediatingAgentId": "api-builder-01",
    "repository": "maturion-foreman-office-app"
  },
  "verificationResults": {
    "allWarningsResolved": true,
    "verificationMethod": "BOTH",
    "verificationDetails": [
      {
        "sourceFile": "src/components/ParkingStation.tsx",
        "warningMessage": "React Hook useEffect has a missing dependency: 'fetchData'",
        "isResolved": true,
        "verificationNotes": "Confirmed fetchData added to dependencies with useCallback wrapper. No warnings in local build or CI."
      },
      {
        "sourceFile": "src/utils/api.ts",
        "warningMessage": "Argument of type 'string | undefined' is not assignable to parameter of type 'string'",
        "isResolved": true,
        "verificationNotes": "Confirmed type guard added. TypeScript compilation clean. No warnings in local build or CI."
      }
    ],
    "totalWarningsVerified": 2,
    "totalWarningsResolved": 2,
    "totalWarningsRemaining": 0
  },
  "verificationEvidence": {
    "codePullTimestamp": "2026-01-07T16:15:00Z",
    "gitCommitVerified": "xyz789abc013",
    "localBuildOutput": "npm run build -- Build succeeded with 0 warnings\nnpm run lint -- Lint passed with 0 warnings",
    "localLintOutput": "âœ“ All files passed linting (0 warnings, 0 errors)",
    "ciRunReference": "https://github.com/org/repo/actions/runs/12350",
    "ciRunTimestamp": "2026-01-07T15:55:00Z",
    "screenshots": []
  },
  "verificationOutcome": {
    "outcome": "PASS",
    "outcomeReason": "All warnings from WARNING_DISCOVERY_REPORT have been successfully remediated. Local build and CI both confirm zero warnings. Root cause identified and prevention measures proposed.",
    "discoveringAgentCanResume": true,
    "remediatingAgentCanResume": true,
    "additionalRemediationRequired": false,
    "additionalRemediationDetails": null
  },
  "signOff": {
    "verifyingAgentSignature": "ui-builder-01",
    "signOffTimestamp": "2026-01-07T16:30:00Z",
    "signOffStatement": "I verify all warnings from prior work are resolved and authorize both ui-builder-01 and api-builder-01 to resume work.",
    "authorizationToResume": true
  }
}
```

---

## Complete Schema Example (FAIL)

```json
{
  "schemaVersion": "1.0.0",
  "reportType": "WARNING_VERIFICATION_REPORT",
  "verificationMetadata": {
    "verifyingAgentId": "ui-builder-01",
    "verificationTimestamp": "2026-01-07T17:00:00Z",
    "warningDiscoveryReportReference": "/governance/evidence/warnings/discovery/WARNING_DISCOVERY_REPORT_2026-01-07T14-35-00Z_ui-builder-01.json",
    "warningRemediationReportReference": "/governance/evidence/warnings/remediation/WARNING_REMEDIATION_REPORT_2026-01-07T16-00-00Z_api-builder-01.json",
    "remediatingAgentId": "api-builder-01",
    "repository": "maturion-foreman-office-app"
  },
  "verificationResults": {
    "allWarningsResolved": false,
    "verificationMethod": "BOTH",
    "verificationDetails": [
      {
        "sourceFile": "src/components/ParkingStation.tsx",
        "warningMessage": "React Hook useEffect has a missing dependency: 'fetchData'",
        "isResolved": false,
        "verificationNotes": "Warning still present in local build output. fetchData not found in dependency array."
      },
      {
        "sourceFile": "src/utils/api.ts",
        "warningMessage": "Argument of type 'string | undefined' is not assignable to parameter of type 'string'",
        "isResolved": true,
        "verificationNotes": "This warning is resolved."
      }
    ],
    "totalWarningsVerified": 2,
    "totalWarningsResolved": 1,
    "totalWarningsRemaining": 1
  },
  "verificationEvidence": {
    "codePullTimestamp": "2026-01-07T16:55:00Z",
    "gitCommitVerified": "xyz789abc014",
    "localBuildOutput": "npm run build -- Build succeeded with 1 warning\nWarning: React Hook useEffect has a missing dependency: 'fetchData'",
    "localLintOutput": null,
    "ciRunReference": null,
    "ciRunTimestamp": null,
    "screenshots": []
  },
  "verificationOutcome": {
    "outcome": "FAIL",
    "outcomeReason": "1 of 2 warnings remains unresolved. ParkingStation.tsx still has useEffect dependency warning. Remediation incomplete.",
    "discoveringAgentCanResume": false,
    "remediatingAgentCanResume": false,
    "additionalRemediationRequired": true,
    "additionalRemediationDetails": "api-builder-01 must complete remediation of ParkingStation.tsx useEffect warning before verification can pass."
  },
  "signOff": {
    "verifyingAgentSignature": "ui-builder-01",
    "signOffTimestamp": "2026-01-07T17:00:00Z",
    "signOffStatement": "Verification FAILED. Warnings remain. Agents may NOT resume work until all warnings resolved.",
    "authorizationToResume": false
  }
}
```

---

## Validation Rules

### Required Field Validation
- All fields marked `(required)` MUST be present and non-empty
- All fields marked `(conditional)` MUST be present if condition is true
- All timestamps MUST be valid ISO 8601 format
- All enums MUST use specified values

### Verification Results Validation
- `totalWarningsVerified` MUST equal length of `verificationDetails` array
- `totalWarningsResolved` MUST equal count of `isResolved=true` in `verificationDetails`
- `totalWarningsRemaining` MUST equal `totalWarningsVerified - totalWarningsResolved`
- If `allWarningsResolved=true`, then `totalWarningsRemaining` MUST be 0

### Outcome Logic Validation
- If `outcome=PASS`, then `allWarningsResolved=true`, `discoveringAgentCanResume=true`, `remediatingAgentCanResume=true`, `additionalRemediationRequired=false`
- If `outcome=FAIL`, then `allWarningsResolved=false`, `discoveringAgentCanResume=false`, `remediatingAgentCanResume=false`, `additionalRemediationRequired=true`
- If `outcome=PARTIAL`, this indicates incomplete remediation and should escalate to FM/Governance

### Sign-Off Validation
- `authorizationToResume` MUST be `true` if `outcome=PASS`
- `authorizationToResume` MUST be `false` if `outcome=FAIL` or `PARTIAL`
- `signOffStatement` MUST explicitly state authorization decision

---

## Usage

### When to Generate
- After receiving WARNING_REMEDIATION_REPORT from original agent
- After pulling latest code with remediation commits
- After running local build/lint/tests
- After reviewing CI results (if applicable)

### Who Generates
- Discovering agent (the agent that originally found the warnings)
- NOT the remediating agent (they generate WARNING_REMEDIATION_REPORT)

### What Happens Next (PASS outcome)
1. Discovering agent generates this report with outcome=PASS
2. Discovering agent submits to FM/Governance
3. FM/Governance authorizes both agents to resume work
4. Discovering agent resumes current task
5. Remediating agent resumes normal work queue

### What Happens Next (FAIL outcome)
1. Discovering agent generates this report with outcome=FAIL
2. Discovering agent submits to FM/Governance
3. FM/Governance returns to remediating agent for additional fixes
4. Remediating agent completes additional remediation
5. Process repeats from WARNING_REMEDIATION_REPORT generation

---

## Storage Location

**Path**: `/governance/evidence/warnings/verification/WARNING_VERIFICATION_REPORT_<timestamp>_<verifyingAgentId>.json`

**Example**: `/governance/evidence/warnings/verification/WARNING_VERIFICATION_REPORT_2026-01-07T16-30-00Z_ui-builder-01.json`

**Committed**: YES - Must be committed to repository for audit trail

---

## Integration

This schema is referenced by:
- `WARNING_DISCOVERY_BLOCKER_PROTOCOL.md` Section 3.5
- `QA_POLICY_MASTER.md` Section 3.3.3
- `BUILDER_QA_HANDOVER_POLICY.md` Section 8.4

---

## Template

See: `governance/templates/WARNING_VERIFICATION_REPORT.template.md`

---

**Document Authority**: Governance Administrator  
**Approval**: Johan (Maturion Engineering Leadership)  
**Effective Date**: 2026-01-07
